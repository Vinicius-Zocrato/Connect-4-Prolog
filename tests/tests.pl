:- begin_tests(connect4).

:- consult('../project/projet.pl').

% ============================================
% TEST 1: Victoire verticale
% ============================================
test(vertical_win) :-
    Board = [
        ['x','x','x','x','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 2: Pas de victoire (3 x)
% ============================================
test(no_vertical_win, [fail]) :-
    Board = [
        ['x','x','x','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 3: Victoire horizontale ligne 1
% ============================================
test(horizontal_bottom) :-
    Board = [
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'o').

% ============================================
% TEST 4: Victoire horizontale ligne 3
% ============================================
test(horizontal_mid) :-
    Board = [
        ['e','e','x','e','e','e'],
        ['e','e','x','e','e','e'],
        ['e','e','x','e','e','e'],
        ['e','e','x','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 5: Diagonale ↗
% ============================================
test(diagonal_up_right) :-
    Board = [
        ['x','e','e','e','e','e'],
        ['e','x','e','e','e','e'],
        ['e','e','x','e','e','e'],
        ['e','e','e','x','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 6: Diagonale ↘
% ============================================
test(diagonal_down_right) :-
    Board = [
        ['e','e','e','o','e','e'],
        ['e','e','o','e','e','e'],
        ['e','o','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'o').

% ============================================
% TEST 7: Pas de victoire (board vide)
% ============================================
test(empty_board, [fail]) :-
    Board = [
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 8: 4 non consécutifs
% ============================================
test(non_consecutive, [fail]) :-
    Board = [
        ['x','e','e','e','e','e'],
        ['x','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['x','e','e','e','e','e'],
        ['x','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 9: >4 alignés
% ============================================
test(more_than_four) :-
    Board = [
        ['e','e','e','e','e','e'],
        ['x','x','x','x','x','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'x').

% ============================================
% TEST 10: horizontale colonnes 2–5
% ============================================
test(horizontal_2_to_5) :-
    Board = [
        ['e','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['o','e','e','e','e','e'],
        ['e','e','e','e','e','e'],
        ['e','e','e','e','e','e']
    ],
    win(Board, 'o').

:- end_tests(connect4).
